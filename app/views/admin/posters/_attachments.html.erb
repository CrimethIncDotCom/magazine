<% %w[front back].each do |side| %>
  <div class="row">
    <% %w[download image].each do |kind| %>

      <fieldset class="col-12 col-md-6 mb-5">
        <legend><%= side.capitalize %> <%= kind.capitalize.pluralize %></legend>

        <div class="row">
          <% %w[color black_and_white].each do |color| %>
            <div class="col-12 col-sm-6 mb-3">

              <div class="form-group">
                <div class="card">
                  <div class="card-body">
                    <%= form.label attachement_form_attr_for(side, kind, color), "#{color.titleize} #{attachment_display_name_for(kind)}" %>
                    <%= form.file_field attachement_form_attr_for(side, kind, color), class: "form-control-file", accept: acceptable_mime_types_for(kind) %>

                    <% if resource.send(attachement_form_attr_for(side, kind, color)).attached? %>
                      <% if kind == 'download' %>
                        <p><%= image_tag resource.send(attachement_form_attr_for(side, kind, color)).preview(resize_to_limit: [@preview_width, @preview_width]), class: "mt-3 rounded d-block" %></p>
                      <% else %>
                        <p><%= image_tag url_for(image_variant_by_width(@preview_width, @preview_width)), class: "mt-3 rounded d-block" %></p>
                      <% end %>
                    <% end %>
                  </div>
                </div>
              </div>

            </div><!-- .col -->
          <% end %><%# color %>
        </div><!-- .row -->

      </fieldset>

    <% end %><%# kind %>
  </div><!-- .row -->
<% end %><%# side %>
